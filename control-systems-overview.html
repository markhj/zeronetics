<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zeronetics Game Engine: Control Systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zeronetics Game Engine
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('control-systems-overview.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Control Systems </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <b>Control Systems</b> module provides a flexible system for managing user inputs.</p>
<h2><a class="anchor" id="autotoc_md139"></a>
ðŸ’¡ The idea</h2>
<p>The idea is that every user input gets mapped to a signal, and in a completely separate process the signal is translated to an action.</p>
<p><img src="https://res.cloudinary.com/drfztvfdh/image/upload/v1721452847/zeronetics/Contorl_mapping_-_Input_Mapping_1_m2hhmy.png" alt="" class="inline"/></p>
<p>For starters, this means that several inputs can map the same action without the need of duplicate code. For example if Space Bar, primary mouse button and Joystick "X" all make the character jump, then all these inputs simply map to the "jump" signal, rather than each implementing the action of jumping (or pointing to a part of the code which makes the jump).</p>
<p>On the other side of the coin is a process which maps signals to actions. This system doesn't know which user inputs were given, it just receives the signal "jump", and decides what to do with it.</p>
<h2><a class="anchor" id="autotoc_md140"></a>
ðŸŽ® Basic usage</h2>
<p>First, we instantiate <a class="el" href="classZEN_1_1ControlSystems_1_1ControlManager.html">ZEN::ControlSystems::ControlManager</a>, <a class="el" href="classZEN_1_1ControlSystems_1_1InputMapping.html">ZEN::ControlSystems::InputMapping</a> and <a class="el" href="classZEN_1_1ControlSystems_1_1SignalHandler.html">ZEN::ControlSystems::SignalHandler</a>.</p>
<p>The <code>ControlManager</code> is the instance which will be passed to the <code><a class="el" href="classZEN_1_1Window.html#a38ebf8096b598b8ab3df8260ce742838">ZEN::Window::setInputManager</a></code>. It's the "umbrella" class which binds all the parts together.</p>
<div class="fragment"><div class="line">std::shared_ptr&lt;ControlManager&gt; m_controlManager = std::make_shared&lt;ControlManager&gt;(ControlManager());</div>
<div class="line">std::shared_ptr&lt;InputMapping&gt; m_inputMapping = std::make_shared&lt;InputMapping&gt;(InputMapping());</div>
<div class="line">std::shared_ptr&lt;SignalHandler&gt; m_signalHandler = std::make_shared&lt;SignalHandler&gt;(SignalHandler());</div>
</div><!-- fragment --><p>Next, we'll connect the <code>InputMapping</code> and <code>SignalHandler</code> to <code>ControlManager</code>.</p>
<div class="fragment"><div class="line">m_controlManager-&gt;m_inputMapping = m_inputMapping;</div>
<div class="line">m_controlManager-&gt;m_signalHandler = m_signalHandler;</div>
</div><!-- fragment --><p>And, finally, we need to instruct the <a class="el" href="classZEN_1_1Window.html">ZEN::Window</a> instance to use <em>this</em> <a class="el" href="classZEN_1_1IInputManager.html">ZEN::IInputManager</a>.</p>
<div class="fragment"><div class="line">window-&gt;setInputManager(m_controlManager);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md141"></a>
Simple mapping</h2>
<p>In this example, we will map the press of the key <code>A</code> to the signal <code>left</code>.</p>
<div class="fragment"><div class="line">m_inputMapping-&gt;keyJustPressed(Key::A, <span class="stringliteral">&quot;left&quot;</span>);</div>
</div><!-- fragment --><p>And we'll instruct the <code>SignalHandler</code> to process the signal <code>left</code> by printing a message that says "Going left!".</p>
<div class="fragment"><div class="line">m_signalHandler-&gt;on(<span class="stringliteral">&quot;left&quot;</span>, [&amp;]() {</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Going left!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">});</div>
</div><!-- fragment --><p>And that's it! Now, when you open the game and press <code>A</code>`, you will see "Going left!" printed to the console.</p>
<p>To learn more about the different mapping options, continue reading <a class="el" href="control-systems-mapping.html">Input mapping</a>.</p>
<h2><a class="anchor" id="autotoc_md142"></a>
ðŸ”€ Swap mappings</h2>
<p>Another advantage is that mapping and signal handling can get swapped on-the-fly (during run-time). For example, when you open the main menu, pause menu or a special HUD, you typically want to apply a completely different set of controls.</p>
<p>This is achieved in the Control Systems module by swapping the "in-game mapping" to the "main menu mapping", and so forth.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> inGameMapping = std::make_shared&lt;InputMapping&gt;(InputMapping());</div>
<div class="line"><span class="keyword">auto</span> mainMenuMapping = std::make_shared&lt;InputMapping&gt;(InputMapping());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Code for when the game starts</span></div>
<div class="line">m_controlManager-&gt;m_inputMapping = inGameMapping;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// When code is executed to open the main menu</span></div>
<div class="line">m_controlManager-&gt;m_inputMapping = mainMenuMapping;</div>
</div><!-- fragment --><p>Of course, you can do the same with signal handling, but this is normally not required, as long as your signals have proper naming.</p>
<p>Furthermore, by keeping the same signal handler through-out your run-time, you have the benefit that in-game and main menu can share signals. Maybe you always to be able to open a help menu, no matter if the player is in the main menu or in-game. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="modules.html">Modules</a></li><li class="navelem"><a class="el" href="control-systems.html">Control Systems</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
